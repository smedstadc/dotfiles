# dotfiles support
alias zsource="source ~/.zshrc"
alias edot="atom ~/.dotfiles/"
alias dotup="~/.dotfiles/setup"
alias godot="cd ~/.dotfiles"

# dev
alias mux="tmuxinator"
alias tk="tmux kill-session -t"
alias doismell="reek app/ -f html > report.html"
alias gp="cd ~/projects"

# js
# default yarn to vendor folder because we usually work with those
alias yav="yarn add --modules-folder=vendor/assets/yarn"
alias yar="yarn remove --modules-folder=vendor/assets/yarn"
alias yiv="yarn install --modules-folder=vendor/assets/yarn"


# choose rails template

hanami() {
  if [ -f $(pwd)/Gemfile ]; then
    echo "using bundle exec"
    bundle exec hanami $@
  elif [ -x $(rbenv which hanami) ]; then
    echo "using hanami managed by rbenv"
    $(rbenv which hanami) $@
  else
    echo "computer cannot into hanami :("
  fi
}


jekyll() {
  if [ -f $(pwd)/Gemfile ]; then
    echo "using bundle exec"
    bundle exec jekyll $@
  elif [ -x $(rbenv which jekyll) ]; then
    echo "using jekyll managed by rbenv"
    $(rbenv which jekyll) $@
  else
    echo "computer cannot into jekyll :("
  fi
}


ember() {
  if [ -x $(npm bin)/ember ]; then
    echo "using node_modules ember-cli"
    $(yarn bin)/ember $@
  elif [ -x $(nodenv which ember) ]; then
    echo "using nodenv shim ember-cli"
    $(nodenv which ember) $@
  fi
}


rails() {
  if [ -x $(pwd)/bin/rails ]; then
    echo "using binstub"
    $(pwd)/bin/rails $@
  elif [ -f $(pwd)/Gemfile ]; then
    echo "using bundle exec"
    bundle exec rails $@
  elif [ -x $(rbenv which rails) ]; then
    echo "using rails managed by rbenv"
    $(rbenv which rails) $@
  else
    echo "computer cannot into rails :("
  fi
}

guard() {
  if [ -x $(pwd)/bin/guard ]; then
    echo "using binstub"
    $(pwd)/bin/guard $@
  elif [ -f Gemfile ]; then
    echo "using bundle exec"
    bundle exec guard $@
  elif [ -x $(rbenv which guard) ]; then
    echo "using rbenv shim"
    $(rbenv which guard) $@
  else
    echo "computer cannot into guard :("
  fi
}

rake() {
  if [ -x $(pwd)/bin/rake ]; then
    echo "using binstub"
    $(pwd)/bin/rake $@
  elif [ -f Gemfile ]; then
    echo "using bundle exec"
    bundle exec rake $@
  elif [ -x $(rbenv which rake) ]; then
    echo "using rbenv shim"
    $(rbenv which rake) $@
  else
    echo "computer cannot into rake :("
  fi
}

rspec() {
  if [ -x $(pwd)/bin/rspec ]; then
    echo "using binstub"
    $(pwd)/bin/rspec $@
  elif [ -f Gemfile ]; then
    echo "using bundle exec"
    bundle exec rspec $@
  elif [ -x $(rbenv which rspec) ]; then
    echo "using rbenv shim"
    $(rbenv which rspec) $@
  else
    echo "computer cannot into rspec :("
  fi
}

# I have to be silent.
yarn() {
  if [ -x $(pwd)/bin/yarn ]; then
    $(pwd)/bin/yarn $@
  elif [ -x /usr/local/bin/yarn ]; then
    /usr/local/bin/yarn $@
  elif [ -x $(nodenv which yarn) ]; then
    $(nodenv which yarn) $@
  else
    echo "computer cannot into yarn :("
  fi
}

# ruby
alias be="bundle exec"

# rails dev
alias devtail="tail -f log/development.log"
alias testtail="tail -f log/test.log"
alias lsr="lsof -i tcp:3000 | grep ruby"
alias fixit="pkill spring; pkill puma"
alias getsprung="bundle exec spring binstub --all"

# mobile dev
alias cord=cordova

# git
alias ga="git add --all"
alias gcan="git commit --amend --no-edit"
alias gco="git checkout"

alias ember-clean="rm -rf node_modules bower_components tmp dist"
