# dotfiles support
alias zsource="source ~/.zshrc"
alias edot="atom ~/.dotfiles/"
alias dotup="~/.dotfiles/setup"
alias godot="cd ~/.dotfiles"

# dev
alias mux="tmuxinator"
alias tk="tmux kill-session -t"
alias doismell="reek app/ -f html > report.html"
alias gp="cd ~/projects"

# js
# default yarn to vendor folder because we usually work with those
alias yav="yarn add --modules-folder=vendor/assets/yarn"
alias yar="yarn remove --modules-folder=vendor/assets/yarn"
alias yiv="yarn install --modules-folder=vendor/assets/yarn"


ember() {
  if [ -f $(npm bin)/ember ]; then
    echo "using project ember-cli"
    $(npm bin)/ember $@
  elif [ -f $(nodenv which ember) ]; then
    echo "using ember-cli found with nodenv"
    $(nodenv which ember) $@
  fi
}


rails() {
  if [ -f $(pwd)/bin/rails ]; then
    echo "using binstub"
    $(pwd)/bin/rails $@
  elif [ -f $(pwd)/Gemfile ]; then
    echo "using bundle exec"
    bundle exec rails $@
  elif [ -d $(pwd)/.bundle ]; then
    echo "using bundle exec"
    bundle exec rails $@
  elif [ -f $(rbenv which rails) ]; then
    echo "using rails managed by rbenv"
    $(rbenv which rails) $@
  else
    echo "computer cannot into rails :("
  fi
}

guard() {
  if [ -f $(pwd)/bin/guard ]; then
    echo "using binstub"
    $(pwd)/bin/guard $@
  elif [ -f Gemfile ]; then
    echo "using bundle exec"
    bundle exec guard $@
  elif [ -d $(pwd)/.bundle ]; then
    echo "using bundle exec"
    bundle exec guard $@
  elif [ -f $HOME/.rbenv/shims/guard ]; then
    echo "using rbenv shim"
    $HOME/.rbenv/shims/guard $@
  else
    echo "computer cannot into guard :("
  fi
}

# ruby
alias be="bundle exec"

# rails dev
alias brails="bin/rails"
alias brake="bin/rake"
alias devtail="tail -f log/development.log"
alias testtail="tail -f log/test.log"
alias testprep="bin/rake db:schema:load RAILS_ENV=test"
alias lsr="lsof -i tcp:3000 | grep ruby"
alias fixit="pkill spring; pkill puma"

# mobile dev
alias cord=cordova

# git
alias ga="git add --all"
alias gcan="git commit --amend --no-edit"
alias gco="git checkout"
